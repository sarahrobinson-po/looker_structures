{"elements": [{"Label": "adult_education_block_grant", "Type": "model", "SQL": "NA"}, {"Label": "consortium", "Type": "explore", "SQL": "NA"}, {"Label": "aebg_budget_items", "Type": "view", "SQL": "no sql?"}, {"Label": "aebg_members", "Type": "view", "SQL": "proposals_institutions"}, {"Label": "allocations", "Type": "view", "SQL": "allocations"}, {"Label": "allocations_aebg", "Type": "view", "SQL": "(\n\n  select a.id as id\n      , a.amount as amount\n      , ti.id as member_id\n      , ti.name as member\n      , ti.`type` as member_type\n      , CASE\n        WHEN ti.type = 'k12' THEN 'K-12 School District'\n        WHEN ti.type = 'coe' THEN 'County Office Of Education'\n        WHEN ti.type = 'rop' THEN 'Regional Occupational Center /Program'\n        WHEN ti.type = 'jpa' THEN 'Joint Powers Associations/Authorities'\n        WHEN ti.type = 'college' THEN 'Community College'\n        WHEN ti.type = 'district' THEN 'Community College District'\n        ELSE 'Other'\n        END as full_member_type\n      , fi.id as consortium_id\n      , fi.name as consortium\n      , fi.`type` as consortium_type\n      , a.year_id\n      , y.name as year\n      , cfads.direct_funding\n      , fai.name as fiscal_agent\n      , states.name as status\nfrom allocations as a\nleft join institutions as fi on fi.id = a.from_institution_id\nleft join institutions as ti on ti.id = a.to_institution_id\nleft join cfads on cfads.institution_id = fi.id and cfads.year_id = a.year_id\nleft join institutions as fai on fai.id = cfads.fiscal_agent_id\nleft join states on states.id = cfads.status_id\njoin years as y on y.id = a.year_id\nwhere a.fund_id = 3 and ti.type != 'consortium'\n)"}, {"Label": "annual_plans", "Type": "view", "SQL": "annual_plans"}, {"Label": "annual_plan_strategies", "Type": "orphan", "SQL": "annual_plan_strategies"}, {"Label": "budget_items", "Type": "view", "SQL": "no sql?"}, {"Label": "budget_items_unpivoted", "Type": "explore", "SQL": "NA"}, {"Label": "cfads", "Type": "view", "SQL": "cfads"}, {"Label": "codes", "Type": "view", "SQL": "codes"}, {"Label": "contact_types", "Type": "orphan", "SQL": "contact_types"}, {"Label": "document_types", "Type": "orphan", "SQL": "document_types"}, {"Label": "durations", "Type": "view", "SQL": "durations"}, {"Label": "files", "Type": "orphan", "SQL": "files"}, {"Label": "fiscal_reports", "Type": "view", "SQL": "(\n    SELECT\n      frl.id,\n      fr.below_target_explanation,\n      fr.comments,\n      fr.created_at,\n      fr.creator_id,\n      fr.deleted,\n      fr.submitted,\n      fr.duration_id,\n      fr.fund_id,\n      fr.institution_id,\n      fr.proposal_id,\n      frl.object_code_id,\n      frl.amount,\n      d.quarter,\n      d.year,\n      oc.name\n\n\n\n    FROM fiscal_reports fr\n    JOIN fiscal_report_lines frl ON fr.id = frl.fiscal_report_id\n    JOIN object_codes oc ON oc.id = frl.object_code_id\n    JOIN durations d on d.id = fr.duration_id\n  )"}, {"Label": "funds", "Type": "view", "SQL": "funds"}, {"Label": "funds_object_codes", "Type": "orphan", "SQL": "funds_object_codes"}, {"Label": "funds_users", "Type": "orphan", "SQL": "funds_users"}, {"Label": "fund_fiscal_thresholds", "Type": "orphan", "SQL": "fund_fiscal_thresholds"}, {"Label": "goal_area", "Type": "view", "SQL": "no sql?"}, {"Label": "guided_pathway", "Type": "model", "SQL": "NA"}, {"Label": "projects", "Type": "explore", "SQL": "NA"}, {"Label": "institutions", "Type": "view", "SQL": "institutions"}, {"Label": "institutions_dt", "Type": "view", "SQL": "swp_institutions_dt"}, {"Label": "institutions_relationships", "Type": "orphan", "SQL": "institutions_relationships"}, {"Label": "institutions_users", "Type": "orphan", "SQL": "institutions_users"}, {"Label": "integrated_planning", "Type": "model", "SQL": "NA"}, {"Label": "job_categories", "Type": "view", "SQL": "job_catgeories"}, {"Label": "lmis", "Type": "view", "SQL": "lmis"}, {"Label": "lmis_counties", "Type": "orphan", "SQL": "lmis_counties"}, {"Label": "lmis_subregions", "Type": "orphan", "SQL": "lmis_subregions"}, {"Label": "lmi_evidences", "Type": "orphan", "SQL": "lmi_evidences"}, {"Label": "lmi_programs", "Type": "view", "SQL": "lmi_programs"}, {"Label": "lmi_soc_codes", "Type": "view", "SQL": "lmi_soc_codes"}, {"Label": "looker_objects", "Type": "orphan", "SQL": "looker_objects"}, {"Label": "metrics", "Type": "view", "SQL": "metrics"}, {"Label": "metric_definitions", "Type": "view", "SQL": "metric_definitions"}, {"Label": "notifications", "Type": "orphan", "SQL": "notifications"}, {"Label": "notification_types", "Type": "orphan", "SQL": "notification_types"}, {"Label": "object_codes", "Type": "view", "SQL": "object_codes"}, {"Label": "platform", "Type": "model", "SQL": "NA"}, {"Label": "requests", "Type": "orphan", "SQL": "requests"}, {"Label": "proposals", "Type": "view", "SQL": "proposals"}, {"Label": "proposals_contacts", "Type": "view", "SQL": "proposals_contacts"}, {"Label": "proposals_counties", "Type": "orphan", "SQL": "proposals_counties"}, {"Label": "proposals_funds", "Type": "view", "SQL": "proposals_funds"}, {"Label": "proposals_institutions", "Type": "explore", "SQL": "NA"}, {"Label": "proposals_recommendations", "Type": "view", "SQL": "proposals_recommendations"}, {"Label": "proposals_reports", "Type": "orphan", "SQL": "proposals_reports"}, {"Label": "proposals_reports_audit", "Type": "orphan", "SQL": "proposals_reports_audit"}, {"Label": "proposals_sectors", "Type": "view", "SQL": "proposals_sectors"}, {"Label": "proposals_strategies", "Type": "orphan", "SQL": "proposals_strategies"}, {"Label": "proposals_subregions", "Type": "orphan", "SQL": "proposals_subregions"}, {"Label": "recommendations", "Type": "view", "SQL": "recommendations"}, {"Label": "recommendation_areas", "Type": "view", "SQL": "recommendation_areas"}, {"Label": "roles", "Type": "view", "SQL": "roles"}, {"Label": "roles_users", "Type": "orphan", "SQL": "roles_users"}, {"Label": "sectors", "Type": "view", "SQL": "sectors"}, {"Label": "signing_authorities", "Type": "orphan", "SQL": "signing_authorities"}, {"Label": "states", "Type": "view", "SQL": "states"}, {"Label": "status_updates", "Type": "orphan", "SQL": "status_updates"}, {"Label": "strong_workforce_program", "Type": "model", "SQL": "NA"}, {"Label": "tasks", "Type": "view", "SQL": "(\n    SELECT *\n    FROM tasks\n    WHERE tasks.id IN (\n      SELECT MAX(ID)\n      FROM tasks\n      GROUP BY\n        task_type, performed_by_id, user_id, proposal_id, institution_id,\n        cfad_id, annual_plan_id, duration_id, report_id, year_id, role_id\n\n\n    )\n  )"}, {"Label": "users", "Type": "view", "SQL": "users"}, {"Label": "users_role_scopes", "Type": "view", "SQL": "users_role_scopes"}, {"Label": "workplan_items", "Type": "view", "SQL": "workplan_items"}, {"Label": "workplan_items_gp", "Type": "view", "SQL": "workplan_items"}, {"Label": "workplan_items_institutions", "Type": "orphan", "SQL": "workplan_items_institutions"}, {"Label": "workplan_items_strategies", "Type": "orphan", "SQL": "workplan_items_strategies"}, {"Label": "workplan_types", "Type": "view", "SQL": "workplan_types"}, {"Label": "years", "Type": "view", "SQL": "years"}], "connections": [{"To": "adult_education_block_grant", "From": "consortium", "sql_on": "NA", "fields": "NA"}, {"To": "consortium", "From": "institutions", "sql_on": "${member_institution.id} = ${member_relation.institution_id}", "fields": "all"}, {"To": "consortium", "From": "allocations_aebg", "sql_on": "${allocations_aebg.consortium_id} = ${consortium.id}", "fields": "all"}, {"To": "consortium", "From": "proposals_contacts", "sql_on": "${consortium.id} = ${proposals_contacts.institution_id}", "fields": []}, {"To": "consortium", "From": "users", "sql_on": "${proposals_contacts.user_id} = ${consortium_contacts.id}", "fields": "all"}, {"To": "consortium", "From": "cfads", "sql_on": "${cfads.institution_id} = ${consortium.id}", "fields": "all"}, {"To": "consortium", "From": "years", "sql_on": "${cfad_year.id} = ${cfads.year_id}", "fields": "all"}, {"To": "consortium", "From": "states", "sql_on": "${cfads.status_id} = ${cfad_state.id}", "fields": "all"}, {"To": "consortium", "From": "proposals_institutions", "sql_on": "${consortium_proposal_relation.institution_id} = ${consortium.id}", "fields": []}, {"To": "consortium", "From": "proposals", "sql_on": "${consortium_proposal.id} = ${consortium_proposal_relation.proposal_id}", "fields": ["consortium_proposal.title"]}, {"To": "consortium", "From": "aebg_members", "sql_on": "${member_relation.institution_id} = ${consortium_proposal.id}", "fields": []}, {"To": "consortium", "From": "aebg_budget_items", "sql_on": "${consortium_proposal.id} = ${aebg_budget_items.proposal_id}", "fields": "all"}, {"To": "consortium", "From": "annual_plans", "sql_on": "${annual_plans.proposal_id} = ${consortium_proposal.id}", "fields": "all"}, {"To": "consortium", "From": "fiscal_reports", "sql_on": "${consortium_proposal_relation.proposal_id} = ${fiscal_reports.proposal_id} AND\n    ${consortium_proposal_relation.institution_id} = ${fiscal_reports.institution_id}", "fields": "all"}, {"To": "guided_pathway", "From": "projects", "sql_on": "NA", "fields": "NA"}, {"To": "projects", "From": "proposals", "sql_on": "NA", "fields": "all"}, {"To": "projects", "From": "years", "sql_on": "${budget_item_year.id} = ${budget_items.year_id}", "fields": "all"}, {"To": "projects", "From": "workplan_items_gp", "sql_on": "${projects.id} = ${workplan_items_gp.proposal_id}", "fields": "all"}, {"To": "projects", "From": "workplan_types", "sql_on": "${workplan_items_gp.workplan_type_id} = ${workplan_types.id}", "fields": "all"}, {"To": "projects", "From": "states", "sql_on": "${states.id} = ${projects.state_id}", "fields": "all"}, {"To": "projects", "From": "budget_items", "sql_on": "${budget_items.proposal_id} = ${projects.id}", "fields": "all"}, {"To": "projects", "From": "proposals_institutions", "sql_on": "${proposals_institutions.proposal_id} = ${projects.id}", "fields": "all"}, {"To": "projects", "From": "institutions_dt", "sql_on": "${budget_items.institution_id} = ${institutions.id}", "fields": "all"}, {"To": "projects", "From": "object_codes", "sql_on": "${budget_items.object_code_id} = ${object_codes.id}", "fields": "all"}, {"To": "projects", "From": "proposals_funds", "sql_on": "${projects.id} = ${proposals_funds.proposal_id}", "fields": []}, {"To": "projects", "From": "funds", "sql_on": "${budget_items.fund_id} = ${budget_fund.id}", "fields": "all"}, {"To": "projects", "From": "workplan_items", "sql_on": "${projects.id} = ${workplan_items.proposal_id}", "fields": "all"}, {"To": "projects", "From": "goal_area", "sql_on": "${workplan_items.id} = ${goal_areas.id}", "fields": "all"}, {"To": "integrated_planning", "From": "projects", "sql_on": "NA", "fields": "NA"}, {"To": "platform", "From": "requests", "sql_on": "NA", "fields": "NA"}, {"To": "requests", "From": "users", "sql_on": "${requests.sudo_user_id} = ${sudo_users.id}", "fields": "all"}, {"To": "proposals_institutions", "From": "proposals_institutions", "sql_on": "NA", "fields": "all"}, {"To": "proposals_institutions", "From": "institutions", "sql_on": "${allocations.from_institution_id} = ${source_institution.id}", "fields": "all"}, {"To": "proposals_institutions", "From": "institutions_dt", "sql_on": "${proposals_institutions.institution_id} = ${institutions.id}", "fields": "all"}, {"To": "proposals_institutions", "From": "proposals", "sql_on": "${proposals_institutions.proposal_id} = ${projects.id}", "fields": "all"}, {"To": "proposals_institutions", "From": "users", "sql_on": "${projects.creator_id} = ${creator.id}", "fields": "all"}, {"To": "proposals_institutions", "From": "proposals_funds", "sql_on": "${projects.id} = ${proposals_funds.proposal_id}", "fields": []}, {"To": "proposals_institutions", "From": "funds", "sql_on": "${allocations.fund_id} = ${funding_source.id}", "fields": "all"}, {"To": "proposals_institutions", "From": "states", "sql_on": "${status.id} = ${projects.state_id}", "fields": ["status"]}, {"To": "proposals_institutions", "From": "years", "sql_on": "${metrics.baseline_year_id} = ${baseline_years.id}", "fields": "all"}, {"To": "proposals_institutions", "From": "budget_items", "sql_on": "${proposals_institutions.proposal_id} = ${budget_items.proposal_id}\n      and ${proposals_institutions.institution_id} = ${budget_items.institution_id}", "fields": "all"}, {"To": "proposals_institutions", "From": "object_codes", "sql_on": "${budget_items.object_code_id} = ${object_codes.id}", "fields": "all"}, {"To": "proposals_institutions", "From": "allocations", "sql_on": "${funds.id} = ${allocations.fund_id}", "fields": "all"}, {"To": "proposals_institutions", "From": "fiscal_reports", "sql_on": "${proposals_institutions.proposal_id} =  ${fiscal_reports.proposal_id}\n      AND ${proposals_institutions.institution_id} = ${fiscal_reports.institution_id}\n      AND ${fiscal_reports.duration_id} NOT IN (SELECT id FROM durations WHERE durations.`type` = \"annual\")", "fields": "all"}, {"To": "proposals_institutions", "From": "tasks", "sql_on": "${annual_fiscal_report_certification.proposal_id} = ${projects.id}\n      AND ${annual_fiscal_report_certification.task_type} = 'swp_annual_report_approve'\n      AND ${annual_fiscal_report_certification.duration_id} IN (SELECT durations.id FROM durations WHERE durations.type = 'annual' AND durations.year_id = ${fiscal_reports.year})", "fields": "all"}, {"To": "proposals_institutions", "From": "durations", "sql_on": "${fiscal_reports.duration_id} = ${durations.id} AND\n      ${durations.type} != \"annual\"", "fields": "all"}, {"To": "proposals_institutions", "From": "proposals_sectors", "sql_on": "${proposals_sectors.proposal_id} = ${projects.id}", "fields": ["sector_count"]}, {"To": "proposals_institutions", "From": "sectors", "sql_on": "${proposals_sectors.sector_id} = ${sectors.id}", "fields": "all"}, {"To": "proposals_institutions", "From": "lmis", "sql_on": "${projects.id} = ${lmis.proposal_id}", "fields": "all"}, {"To": "proposals_institutions", "From": "lmi_soc_codes", "sql_on": "${lmi_soc_codes.lmi_id} = ${lmis.id}", "fields": "all"}, {"To": "proposals_institutions", "From": "lmi_programs", "sql_on": "${lmis.id} = ${lmi_programs.lmi_id}", "fields": "all"}, {"To": "proposals_institutions", "From": "codes", "sql_on": "${lmi_programs.top6_code_id} = ${top6_codes.id}", "fields": ["top_codes"]}, {"To": "proposals_institutions", "From": "metrics", "sql_on": "${metrics.proposal_id} = ${projects.id}", "fields": "all"}, {"To": "proposals_institutions", "From": "metric_definitions", "sql_on": "${metrics.metric_definition_id} = ${metric_definitions.id}", "fields": "all"}, {"To": "proposals_institutions", "From": "proposals_recommendations", "sql_on": "${proposals_recommendations.proposal_id} = ${projects.id}", "fields": []}, {"To": "proposals_institutions", "From": "recommendations", "sql_on": "${proposals_recommendations.recommendation_code} = ${recommendations.code}", "fields": "all"}, {"To": "proposals_institutions", "From": "recommendation_areas", "sql_on": "${recommendations.recommendation_area_code} = ${recommendation_areas.code}", "fields": "all"}, {"To": "strong_workforce_program", "From": "proposals_institutions", "sql_on": "NA", "fields": "NA"}, {"To": "strong_workforce_program", "From": "budget_items_unpivoted", "sql_on": "NA", "fields": "NA"}, {"To": "users", "From": "users", "sql_on": "NA", "fields": "all"}, {"To": "users", "From": "users_role_scopes", "sql_on": "${users.id} = ${users_role_scopes.user_id}", "fields": "all"}, {"To": "users", "From": "roles", "sql_on": "${users_role_scopes.role_id} = ${roles.id}", "fields": "all"}, {"To": "users", "From": "institutions", "sql_on": "${users.institution_id} = ${employer.id}", "fields": ["name", "type"]}, {"To": "users", "From": "job_categories", "sql_on": "${users.job_category_id} = ${job_categories.id}", "fields": "all"}]}